# nhl_odds_moneypuck
This project develops an automated data dashboard and a visualization that merges two data sources to evaluate how well the market expectations align with team performance metrics. It uses R and other GitHub actions to retrieve, clean, produce, and visualize the data as it updates at 7 AM every day. The visualization also shows data of how each home team is valued based on the betting odds and expected goal percentage metric. The dashboard is built from two data sources, a csv from MoneyPuck and The Odds API. The API produces betting odds for all the NHL games on that day. The odds are constantly shifting though as they hear about injury reports, lineup changes, and fan betting behavior. The R script also converts the odds into market-implied win probabilities. Overall, the project measures how well sportsbook and the market can predict NHL money lines. 
The other source is a MoneyPuck csv. This is a reliable data source that publishes metrics such as expected goals, expected goals percentage, score-venue-adjusted expected goals, and goals for that has been used in this project. Expected goals is captured by shot quality, location, angle, pre-shot movement, and traffic. These metrics capture how effectively a team plays which makes them strong predictors of expected performance. The project’s daily updates also give the most accurate representations of all NHL team’s strengths.
After collecting data from the two sources, the workflow stores all the results in the data folder in the repository. It runs every day to ensure the data is always up to date without requiring a manual download to do so. Next the pipeline merges the datasets. Since the sportsbooks labeled the teams by their full names while the MoneyPuck data set only uses abbreviations, the project provides a lookup table to map the names to their abbreviations. Then the system joins each home team’s betting probability with the corresponding expected goals metrics. This allows for the visualization to produce the sportsbooks win probability and the expected goals percentage for every home game that day. It shows whether the sportsbooks and analytics agree on the quality of a team. Those with a high expected goals percentage and high probability to win will be in the top right of the plot. Undervalued teams are those with a higher expected goals percentage but low market probability while overvalued teams are those with a low expected goals percentage but high market probability. 
The YAML file is a key component of this whole project. It activates the entire workflow by installing R packages, running all the scripts, generating data, generating visualizations, and committing the results back to the repository. This allows the project to fully function, and it shows the ability of an automated pipeline to update information daily. Creating this file was also the most challenging part of the project for me because GitHub kept crashing when it came time to push the results. I fought with ChatGPT to figure this out and it constantly kept crashing. Eventually after many failures, the results got past the final push and my data began to update daily. 
This project also taught me how simple it was to scrape data from the web and clean it to provide valuable insights which taught me a lot about data collection and wrangling. The project is also useful to anyone who plans to bet or someone who is studying sports analytics. Bettors may find value in determining whether the market expectations are valuable or if the sportsbooks are undervaluing/overvaluing team performance. Furthermore, analysts can use this to data to evaluate how well the market does. Fans can also enjoy this as a simple visualization describing something bigger. Regardless of who the audience is, the project does a good job at showing how files that are updated daily can be merged, automated, and visualized.
